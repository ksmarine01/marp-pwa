<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARPスライドビューア</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#21808D">
    <meta name="description" content="MARPスライドプレゼンテーション用PWA">
    
    <!-- PWA icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyMTgwOEQiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgcng9IjIiLz4KPHA+PHRleHQgeD0iMTIiIHk9IjE2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjgiIGZpbGw9IndoaXRlIj5NQVJQPC90ZXh0PjwvcD4KPC9zdmc+Cjwvc3ZnPgo=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyMTgwOEQiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgcng9IjIiLz4KPHA+PHRleHQgeD0iMTIiIHk9IjE2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjgiIGZpbGw9IndoaXRlIj5NQVJQPC90ZXh0PjwvcD4KPC9zdmc+Cjwvc3ZnPgo=">
</head>
<body>
    <div id="app">
        <!-- File Upload Area -->
        <div id="upload-area" class="upload-area">
            <div class="upload-content">
                <div class="upload-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17,8 12,3 7,8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                </div>
                <h2>MARPファイルをアップロード</h2>
                <p>ファイルをドラッグ＆ドロップするか、クリックして選択してください</p>
                <input type="file" id="file-input" accept=".md,.marp,.txt" class="hidden">
                <button type="button" class="btn btn--primary" onclick="document.getElementById('file-input').click()">
                    ファイルを選択
                </button>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="loading hidden">
            <div class="loading-spinner"></div>
            <p>スライドを処理中...</p>
        </div>

        <!-- Error Display -->
        <div id="error" class="error-display hidden">
            <div class="error-content">
                <div class="error-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                </div>
                <h3>エラーが発生しました</h3>
                <p id="error-message"></p>
                <button type="button" class="btn btn--outline" onclick="resetApp()">
                    戻る
                </button>
            </div>
        </div>

        <!-- Slide Presentation -->
        <div id="presentation" class="presentation hidden">
            <!-- Navigation Header -->
            <header class="presentation-header">
                <div class="header-left">
                    <button type="button" class="btn btn--outline btn--sm" onclick="resetApp()" aria-label="戻る">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m15 18-6-6 6-6"/>
                        </svg>
                        戻る
                    </button>
                </div>
                <div class="slide-counter">
                    <span id="current-slide">1</span> / <span id="total-slides">1</span>
                </div>
                <div class="header-right">
                    <button type="button" id="fullscreen-btn" class="btn btn--outline btn--sm" onclick="toggleFullscreen()" aria-label="フルスクリーン">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Slide Container -->
            <div id="slide-container" class="slide-container">
                <div id="slide-content" class="slide-content"></div>
            </div>

            <!-- Navigation Controls -->
            <div class="navigation-controls">
                <button type="button" id="prev-btn" class="nav-btn nav-btn--prev" onclick="previousSlide()" aria-label="前のスライド" disabled>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m15 18-6-6 6-6"/>
                    </svg>
                </button>
                <button type="button" id="next-btn" class="nav-btn nav-btn--next" onclick="nextSlide()" aria-label="次のスライド">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                </button>
            </div>

            <!-- Touch Navigation Zones -->
            <div class="touch-nav touch-nav--left" onclick="previousSlide()" aria-label="前のスライド"></div>
            <div class="touch-nav touch-nav--right" onclick="nextSlide()" aria-label="次のスライド"></div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>